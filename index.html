<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>Simple Currency Converter</title>
<style>
  /* Reset & basics */
  * { box-sizing: border-box; }
  body {
    margin: 0; padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
      Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    background: #fff;
    color: #222;
    display: flex; flex-direction: column; min-height: 100vh;
  }
  header {
    padding: 1rem;
    text-align: center;
    font-size: 1.8rem;
    font-weight: 700;
    background: linear-gradient(45deg, #ff6f61, #de4313);
    color: white;
  }
  main {
    flex: 1;
    max-width: 440px;
    width: 100%;
    margin: 0 auto;
    padding: 1rem;
  }

  label {
    font-weight: 600;
    display: block;
    margin-bottom: 0.5rem;
    color: #444;
  }
  select {
    width: 100%;
    padding: 0.6rem 0.8rem;
    font-size: 1rem;
    border-radius: 8px;
    border: 1px solid #ccc;
    margin-bottom: 1.2rem;
    appearance: none;
    background: white url("data:image/svg+xml,%3Csvg fill='none' stroke='%23777' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E") no-repeat right 10px center / 16px 16px;
    cursor: pointer;
  }

  #amountDisplay {
    font-size: 2.8rem;
    font-weight: 700;
    text-align: right;
    background: #fefefe;
    border-radius: 12px;
    padding: 1rem 1.2rem;
    margin-bottom: 1.5rem;
    box-shadow:
      0 4px 6px rgba(255, 111, 97, 0.3),
      0 2px 4px rgba(255, 111, 97, 0.25);
    user-select: none;
  }

  #keypad {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 14px;
    margin-bottom: 1.5rem;
  }
  .keyBtn {
    background: white;
    border-radius: 12px;
    font-size: 2.2rem;
    font-weight: 700;
    color: #ff6f61;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow:
      0 4px 8px rgba(222, 67, 19, 0.35);
    user-select: none;
    cursor: pointer;
    height: 64px;
    transition: background-color 0.15s ease;
  }
  .keyBtn:active {
    background-color: #ffd8d3;
  }

  #resultTable {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow:
      0 4px 8px rgba(222, 67, 19, 0.15);
  }
  #resultTable th,
  #resultTable td {
    padding: 12px 16px;
    border-bottom: 1px solid #f0f0f0;
    text-align: center;
    font-size: 1rem;
  }
  #resultTable th {
    background-color: #ff6f61;
    color: white;
    font-weight: 600;
  }
  #resultTable tr:last-child td {
    border-bottom: none;
  }

  .currency-cell {
    display: flex;
    align-items: center;
    gap: 10px;
    justify-content: flex-start;
  }
  .flag {
    width: 28px;
    height: 20px;
    object-fit: cover;
    border-radius: 4px;
    box-shadow: 0 0 6px rgba(255, 111, 97, 0.4);
  }

  /* Mobile */
  @media (max-width: 480px) {
    #amountDisplay {
      font-size: 2.2rem;
    }
    .keyBtn {
      font-size: 1.8rem;
      height: 56px;
    }
    #resultTable th,
    #resultTable td {
      font-size: 0.9rem;
      padding: 10px 12px;
    }
  }
</style>
</head>
<body>

<header>Simple Currency Converter</header>
<main>
  <label for="baseCurrency">Select Base Currency</label>
  <select id="baseCurrency" aria-label="Select base currency">
    <!-- dynamically populated -->
  </select>

  <div id="amountDisplay" aria-live="polite" aria-atomic="true">0</div>

  <div id="keypad" role="grid" aria-label="Number input keypad">
    <div class="keyBtn" role="button" tabindex="0">1</div>
    <div class="keyBtn" role="button" tabindex="0">2</div>
    <div class="keyBtn" role="button" tabindex="0">3</div>
    <div class="keyBtn" role="button" tabindex="0">4</div>
    <div class="keyBtn" role="button" tabindex="0">5</div>
    <div class="keyBtn" role="button" tabindex="0">6</div>
    <div class="keyBtn" role="button" tabindex="0">7</div>
    <div class="keyBtn" role="button" tabindex="0">8</div>
    <div class="keyBtn" role="button" tabindex="0">9</div>
    <div class="keyBtn" role="button" tabindex="0">.</div>
    <div class="keyBtn" role="button" tabindex="0">0</div>
    <div class="keyBtn" role="button" tabindex="0" id="clearBtn">⌫</div>
  </div>

  <table id="resultTable" aria-label="Conversion results">
    <thead>
      <tr>
        <th>Country</th>
        <th>Currency</th>
        <th>Converted Amount</th>
      </tr>
    </thead>
    <tbody>
      <!-- results dynamically inserted -->
    </tbody>
  </table>
</main>

<script>
  const apiKey = 'e6af8843c57bbaeeb525e285'; // Your API key
  const baseSelect = document.getElementById('baseCurrency');
  const amountDisplay = document.getElementById('amountDisplay');
  const keypad = document.getElementById('keypad');
  const resultBody = document.querySelector('#resultTable tbody');

  let amountStr = '0';
  let baseCurrency = 'USD';
  let rates = {};

  // Countries with flags (using flagcdn)
  const countries = {
    USD: { name: 'United States', flag: 'https://flagcdn.com/us.svg' },
    EUR: { name: 'Eurozone', flag: 'https://flagcdn.com/eu.svg' },
    KRW: { name: 'South Korea', flag: 'https://flagcdn.com/kr.svg' },
    JPY: { name: 'Japan', flag: 'https://flagcdn.com/jp.svg' },
    GBP: { name: 'United Kingdom', flag: 'https://flagcdn.com/gb.svg' },
    VND: { name: 'Vietnam', flag: 'https://flagcdn.com/vn.svg' },
    PHP: { name: 'Philippines', flag: 'https://flagcdn.com/ph.svg' },
    IDR: { name: 'Indonesia', flag: 'https://flagcdn.com/id.svg' },
    THB: { name: 'Thailand', flag: 'https://flagcdn.com/th.svg' },
    AUD: { name: 'Australia', flag: 'https://flagcdn.com/au.svg' },
    CAD: { name: 'Canada', flag: 'https://flagcdn.com/ca.svg' },
    CHF: { name: 'Switzerland', flag: 'https://flagcdn.com/ch.svg' },
    CNY: { name: 'China', flag: 'https://flagcdn.com/cn.svg' },
    NZD: { name: 'New Zealand', flag: 'https://flagcdn.com/nz.svg' },
    SEK: { name: 'Sweden', flag: 'https://flagcdn.com/se.svg' },
    MXN: { name: 'Mexico', flag: 'https://flagcdn.com/mx.svg' },
  };

  function populateBaseSelect() {
    Object.entries(countries).forEach(([code, info]) => {
      const option = document.createElement('option');
      option.value = code;
      option.textContent = `${info.name} (${code})`;
      baseSelect.appendChild(option);
    });
    baseSelect.value = baseCurrency;
  }

  function updateAmountDisplay() {
    amountDisplay.textContent = amountStr;
  }

  function formatAmount(num) {
    if (Number.isInteger(num)) {
      return num.toLocaleString();
    } else {
      return num.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }
  }

  keypad.addEventListener('click', e => {
    if (!e.target.classList.contains('keyBtn')) return;
    const key = e.target.textContent;
    if (key === '⌫') {
      if (amountStr.length <= 1) amountStr = '0';
      else amountStr = amountStr.slice(0, -1);
    } else if (key === '.') {
      if (!amountStr.includes('.')) amountStr += '.';
    } else {
      if (amountStr === '0') amountStr = key;
      else amountStr += key;
    }
    updateAmountDisplay();
    calculateAndRender();
  });

  baseSelect.addEventListener('change', e => {
    baseCurrency = e.target.value;
    fetchRates();
  });

  function fetchRates() {
    fetch(`https://v6.exchangerate-api.com/v6/${apiKey}/latest/${baseCurrency}`)
      .then(res => res.json())
      .then(data => {
        if (data.result === 'success') {
          rates = data.conversion_rates;
          calculateAndRender();
        } else {
          alert('Failed to load exchange rates.');
        }
      })
      .catch(() => alert('Error fetching exchange rates.'));
  }

  function calculateAndRender() {
    if (!rates) return;
    const amount = parseFloat(amountStr);
    if (isNaN(amount)) return;
    resultBody.innerHTML = '';

    Object.entries(rates).forEach(([code, rate]) => {
      if (!(code in countries)) return;

      const converted = amount * rate;

      const tr = document.createElement('tr');

      const tdCountry = document.createElement('td');
      tdCountry.className = 'currency-cell';
      const flagImg = document.createElement('img');
      flagImg.src = countries[code].flag;
      flagImg.alt = countries[code].name + ' flag';
      flagImg.className = 'flag';
      tdCountry.appendChild(flagImg);
      tdCountry.appendChild(document.createTextNode(countries[code].name));
      tr.appendChild(tdCountry);

      const tdCode = document.createElement('td');
      tdCode.textContent = code;
      tr.appendChild(tdCode);

      const tdAmount = document.createElement('td');
      tdAmount.textContent = formatAmount(converted);
      tr.appendChild(tdAmount);

      resultBody.appendChild(tr);
    });
  }

  // Initialize
  populateBaseSelect();
  fetchRates();
  updateAmountDisplay();
</script>

</body>
</html>

